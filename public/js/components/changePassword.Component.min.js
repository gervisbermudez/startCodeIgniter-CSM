var changePassword=new Vue({el:"#root",data:{debug:DEBUGMODE,loader:!0,editMode:!1,user_id:"",user:{},form:new VueForm({currentPassword:{value:null,required:!0,type:"password",maxLength:25,minLength:5},password:{value:null,required:!0,type:"password",maxLength:25,minLength:5},password2:{value:null,required:!0,type:"password",maxLength:25,minLength:5}}),status:!0},computed:{btnEnable:function(){return this.form.validate(),0==this.form.errors.length&&this.samePassword},samePassword(){return this.form.fields.password.value==this.form.fields.password2.value}},methods:{validateField(e){let r=UserNewForm;if(!r.form.validateField(e))return r.form.fields[e].valid;r.serverValidation(e)},save(){var e=this;if(e.form.validate(),0==e.form.errors.length){this.loader=!0;var r=BASEURL+"api/v1/users/changePassword";$.ajax({type:"POST",url:r,data:e.getUserData(),dataType:"json",success:function(s){e.debug&&console.log(r,s),M.toast({html:s.error_message}),e.loader=!1},error:function(r){M.toast({html:r.responseJSON.error_message}),e.loader=!1}})}else M.toast({html:"Verifique todos los campos del formulario"})},getUserData(){let e=this.form.fields;return{user_id:user_id,password:e.password.value,currentPassword:e.currentPassword.value}},checkEditMode(){if(user_id){var e=this;e.editMode=!0;var r=BASEURL+"api/v1/users/"+user_id;$.ajax({type:"GET",url:r,data:{},dataType:"json",success:function(s){if(e.debug&&console.log(r,s),200==s.code){let r=s.data;e.user=new User(r)}e.loader=!1,setTimeout(()=>{M.updateTextFields()},1e3)},error:function(r){M.toast({html:response.responseJSON.error_message}),e.loader=!1}})}}},mounted:function(){this.$nextTick((function(){self.debug&&console.log("mounted UserNewForm"),this.checkEditMode()}))}});