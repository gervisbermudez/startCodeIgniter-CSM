var searchComponent=new Vue({el:"#root",data:{items:[],tableView:!0,loader:!0,filter:"",toDeleteItem:{},searchTerm:null,searchResults:!1,categoriesColumns:[{colum:"name",label:"name"},{colum:"type",label:"Type"},{colum:"description",label:"description",format:(e,t)=>{var a=document.createElement("span");return a.innerHTML=e.description,(a.textContent||a.innerText).substring(0,50)+"..."}},{colum:"user",label:"Author"},{colum:"date_create",label:"Creado"},{colum:"status",label:"Status",handler:"publish"},{colum:"user_id",label:"Options",format:(e,t)=>`<a href="${BASEURL+"admin/categorias/editar/"+e.categorie_id}">Edit</a>`}],form_customsColumns:[{colum:"form_name",label:"name"},{colum:"model_type",label:"Type"},{colum:"form_description",label:"Description",format:(e,t)=>{var a=document.createElement("span");return a.innerHTML=e.form_description,(a.textContent||a.innerText).substring(0,50)+"..."}},{colum:"user",label:"Author"},{colum:"date_create",label:"Creado"},{colum:"status",label:"Status",handler:"publish"},{colum:"user_id",label:"Options",format:(e,t)=>`<a href="${BASEURL+"admin/formularios/editForm/"+e.form_custom_id}">Edit</a>`}],form_contentsColumns:[{colum:"model_type",label:"type"},{colum:"user",label:"Author"},{colum:"date_create",label:"Creado"},{colum:"status",label:"Status",handler:"publish"},{colum:"user_id",label:"Options",format:(e,t)=>`<a href="${BASEURL+"admin/formularios/editData/"+e.form_custom_id+"/"+e.form_content_id}">Edit</a>`}],siteformsColumns:[{colum:"name",label:"Name"},{colum:"template",label:"Template"},{colum:"user",label:"Author"},{colum:"date_create",label:"Creado"},{colum:"status",label:"Status",handler:"publish"},{colum:"user_id",label:"Options",format:(e,t)=>`<a href="${BASEURL+"admin/siteforms/editar/"+e.siteform_id}">Edit</a>`}],menusColumns:[{colum:"name",label:"Name"},{colum:"template",label:"Template"},{colum:"position",label:"Position"},{colum:"user",label:"Author"},{colum:"date_create",label:"Creado"},{colum:"status",label:"Status",handler:"publish"},{colum:"user_id",label:"Options",format:(e,t)=>`<a href="${BASEURL+"admin/siteforms/editar/"+e.menu_id}">Edit</a>`}]},mixins:[mixins],computed:{filterMenus:function(){if(this.filter){let e=this.filter.toLowerCase();return this.items.filter((t,a)=>this.searchInObject(t,e))}return this.items},websiteCountResults:function(){return!1===this.searchResults?0:this.searchResults.pages.length+this.searchResults.form_customs.length+this.searchResults.form_contents.length+this.searchResults.siteforms.length+this.searchResults.menus.length+this.searchResults.categories.length+this.searchResults.albumes.length}},methods:{toggleView:function(){this.tableView=!this.tableView,this.initPlugins()},resetFilter:function(){this.filter=""},getPageImagePath:e=>e.imagen_file?BASEURL+e.imagen_file.file_front_path:BASEURL+"public/img/default.jpg",getFullFilePath(e){return BASEURL+e.file_path+this.getFullFileName(e)},getIcon(e){let t="far fa-file";switch(e.file_type){case"folder":t="far fa-folder";break;case"jpg":case"jpeg":case"png":case"gif":t="fas fa-file-image";break;case"html":t="fab fa-html5";break;case"scss":t="fab fa-sass";break;case"css":case"min.css":t="fab fa-css3-alt";break;case"txt":t="far fa-file-alt";break;case"php":case"blade.php":t="fab fa-php";break;case"js":case"json":case"min.js":t="fab fa-js";break;case"eot":case"otf":case"woff2":t="fas fa-font"}return t},getExtention:e=>"folder"==e.file_type?"":"."+e.file_type,isImage:e=>"jpg"==e.file_type||"jpeg"==e.file_type||"png"==e.file_type||"gif"==e.file_type,getImagePath(e){if(this.isImage(e))return BASEURL+e.file_path.substr(2)+e.file_name+"."+e.file_type},getAlbumImagePath:e=>e.items.length?BASEURL+e.items[0].file.file_front_path:BASEURL+"public/img/default.jpg",performSearch:function(){var e=this;e.loader=!0,$.ajax({type:"GET",url:BASEURL+"api/v1/search/?q="+this.searchTerm,data:{},dataType:"json",success:function(t){e.searchResults=t.data,e.searchResults.users=t.data.users.map(e=>new User(e)),e.loader=!1,e.initPlugins()},error:function(t){e.loader=!1,M.toast({html:"OcurriÃ³ un error inesperado"}),console.error(t)}})},base_url:function(e){return BASEURL+e},initPlugins:function(){setTimeout(()=>{var e=document.querySelectorAll(".materialboxed");M.Materialbox.init(e,{});e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{});e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e,{});e=document.querySelectorAll(".tabs");M.Tabs.init(e,{})},100)}},mounted:function(){this.$nextTick((function(){const e=new URLSearchParams(window.location.search).get("q");e?(this.searchTerm=e,this.performSearch()):this.loader=!1}))}});