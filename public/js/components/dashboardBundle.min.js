Vue.component("albumesWidget",{template:"#albumes-widget-template",props:["albumes"],data:function(){return{debug:DEBUGMODE}},mixins:[mixins],methods:{getPageImagePath(e,t){let i=e.items[t]?e.items[t]:{file:{}};return i.file.file_front_path?BASEURL+i.file.file_front_path:BASEURL+"public/img/default.jpg"}},mounted:function(){this.$nextTick((function(){}))}}),Vue.component("createContents",{template:"#create-contents-template",props:["forms_types","content"],data:function(){return{debug:DEBUGMODE}},mixins:[mixins],methods:{isActive:e=>e.status,toggleStatus(e){$.ajax({type:"POST",url:BASEURL+"api/v1/forms/data_set_status/"+e.form_content_id,data:{status:e.status?"1":"0"},dataType:"json",success:function(e){console.log(e),M.toast({html:"Actualizado"})}})},getFormsTypeUrl:e=>BASEURL+"admin/formularios/addData/"+e.form_custom_id,base_url:e=>BASEURL+e},mounted:function(){this.$nextTick((function(){this.debug&&console.log("mounted: createContents")}))}}),Vue.component("fileExplorerCollection",{template:"#fileExplorerCollection-template",props:["files"],data:function(){return{debug:DEBUGMODE}},mixins:[mixins],computed:{shortFiles:function(){if(this.filter){let e=this.filter.toLowerCase();return this.files.filter((t,i)=>this.searchInObject(t,e))}return this.files.filter(e=>"folder"!=e.file_type).slice(0,25)}},methods:{getFiles(){var e=this;$.ajax({type:"GET",url:BASEURL+"api/v1/files/",data:{},dataType:"json",success:function(t){if(200==t.code){let i=t.data;i=i.map(e=>new ExplorerFile(e)),e.files=i,e.init()}}})},getFilterFiles(e,t){var i=this;$.ajax({type:"POST",url:BASEURL+"api/v1/files/filter_files",data:{filter_name:e,filter_value:t},dataType:"json",success:function(e){if(200==e.code){let t=e.data.map(e=>new ExplorerFile(e));i.files=t}}})},filterFiles(e){switch(e){case"important":this.getFilterFiles("featured",["1"]);break;case"trash":this.getFilterFiles("file_path",["./trash/"]),this.curDir="./trash/";break;case"images":this.getFilterFiles("file_type",["jpg","png","gif"]);break;case"doc":this.getFilterFiles("file_type",["pdf","doc"]);break;case"docs":this.getFilterFiles("file_type",["pdf","doc","xls"]);break;case"audio":this.getFilterFiles("file_type",["acc, mp3"]);break;case"video":this.getFilterFiles("file_type",["mp4"]);break;case"zip":this.getFilterFiles("file_type",["zip","rar"])}},featuredFileServe(e){e.featured="1"==e.featured?"0":"1",$.ajax({type:"POST",url:BASEURL+"api/v1/files/featured_file",data:{file:e},dataType:"json",success:function(e){200==e.code&&M.toast({html:"Done!"})}})},init(){$(".fileExplorerCollection-root .collection").niceScroll(),setTimeout(()=>{var e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e,{})},2e3)}},mounted:function(){this.$nextTick((function(){this.init(),this.debug&&console.log("mounted: fileExplorerCollection")}))}}),Vue.component("pageCard",{template:"#page-card-template",props:["pages"],data:function(){return{debug:DEBUGMODE}},methods:{contentText:function(e){var t=document.createElement("span");return t.innerHTML=e.content,(t.textContent||t.innerText).substring(0,220)+"..."},getPageFullPath:function(e){if(1==e.status)return BASEURL+e.path},getPageEditPath:function(e){return BASEURL+"admin/paginas/editar/"+e.page_id}},mounted:function(){this.$nextTick((function(){}))}}),Vue.component("usersCollection",{template:"#user-collection-template",props:["users"],data:function(){return{debug:DEBUGMODE}},methods:{},mounted:function(){this.$nextTick((function(){this.debug&&console.log("mounted: usersCollection")}))}});var dashboardModule=new Vue({el:"#root",data:{debug:DEBUGMODE,loader:!0,users:[],files:[],pages:[],forms_types:[],albumes:[],content:[],api_data:{dashboard:BASEURL+"api/v1/dashboard/"}},mixins:[mixins],methods:{init(){setTimeout(()=>{var e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e,{});e=document.querySelectorAll(".collapsible");M.Collapsible.init(e,{})},3e3)}},mounted:function(){this.$nextTick((function(){Promise.all([fetch(this.api_data.dashboard).then(e=>e.json())]).then(([e])=>{this.users=e.data.users?e.data.users.map(e=>new User(e)):[],this.pages=e.data.pages?e.data.pages.map(e=>(e.user=new User(e.user),e)):[],this.forms_types=e.data.forms_types?e.data.forms_types:[],this.content=e.data.content?e.data.content.map(e=>(e.user=new User(e.user),e.status="1"==e.status,e)):[],this.files=e.data.files?e.data.files.map(e=>new ExplorerFile(e)):[],this.albumes=e.data.albumes?e.data.albumes.map(e=>(e.user=new User(e.user),e)):[],this.loader=!1,this.init()})}))}});