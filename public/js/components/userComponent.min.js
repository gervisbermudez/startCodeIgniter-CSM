Vue.component("userCard",{template:"#user-card-template",props:["user"],data:function(){return{debug:DEBUGMODE}},mixins:[mixins],methods:{getUserUrl(){return BASEURL+"admin/usuarios/ver/"+this.user.user_id}},mounted:function(){this.$nextTick((function(){}))}});var usersModule=new Vue({el:"#root",data:{debug:DEBUGMODE,users:[],loader:!0,tableView:!1,filter:"",toDeleteItem:{}},mixins:[mixins],computed:{filterUsers:function(){if(this.filter){let e=this.filter.toLowerCase();return this.users.filter((t,i)=>this.searchInObject(t,e))}return this.users}},watch:{filter:function(e){this.initPlugins()}},methods:{toggleView:function(){this.tableView=!this.tableView,this.initPlugins()},resetSearch(){this.filter=""},getUsers(){var e=this;e.loader=!0,e.users=[],$.ajax({type:"GET",url:BASEURL+"api/v1/users/",data:{},dataType:"json",success:function(t){e.loader=!1,e.users=t.data.map(e=>new User(e)),e.initPlugins()},error:function(t){e.loader=!1,M.toast({html:"Ocurrió un error inesperado"}),console.error(t)}})},initPlugins:function(){setTimeout(()=>{var e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{}),e=document.querySelectorAll(".dropdown-trigger"),M.Dropdown.init(e,{})},3e3)},tempDelete:function(e,t){this.toDeleteItem.item=e,this.toDeleteItem.index=t},deleteItem:function(e,t){var i=this;i.loader=!0,$.ajax({type:"DELETE",url:BASEURL+"api/v1/users/"+e.user_id,data:{},dataType:"json",success:function(e){200==e.code&&i.users.splice(t,1),setTimeout(()=>{i.loader=!1,i.initPlugins()},1e3)},error:function(e){i.loader=!1,M.toast({html:"Ocurrió un error inesperado"}),console.error(e)}})},confirmCallback(e){e&&this.deleteItem(this.toDeleteItem.item,this.toDeleteItem.index)}},mounted:function(){this.$nextTick((function(){this.getUsers()}))}});