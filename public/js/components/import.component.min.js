var Import=new Vue({el:"#root",data:{exportData:{pages:[],config:[]},tableView:!0,loader:!0,filter:"",selectedFile:!1},mixins:[mixins],computed:{btnEnable:function(){return!0},selectedData:function(){return{pages:this.exportData.pages.filter(e=>e.checked).map(e=>e.page_id),config:this.exportData.config.filter(e=>e.checked).map(e=>e.site_config_id)}}},methods:{getcontentText:function(e){return""},handleFileSelect:function(e){for(var t,o=this,i=e.target.files,n=0;t=i[n];n++){var r=new FileReader;r.onload=function(e){try{o.selectedFile=!0,fileContent=JSON.parse(e.target.result),console.log(fileContent),fileContent.pages&&(o.exportData.pages=fileContent.pages),fileContent.config&&(o.exportData.config=fileContent.config)}catch(e){console.error("ex when trying to parse json = "+e),M.toast({html:"Ocurrió un error inesperado"})}},r.readAsText(t)}},toggleView:function(){this.tableView=!this.tableView,this.initPlugins()},resetFilter:function(){this.filter=""},saveData:function(){console.log("saveData fired"),this.loader=!0;var e=new FormData;e.append("exportData",JSON.stringify(this.selectedData)),e.append("import_file",$("#files").prop("files")[0]),$.ajax({type:"POST",url:BASEURL+"api/v1/config/import_file",data:e,processData:!1,contentType:!1,dataType:"json",success:e=>{200==e.code?M.toast({html:"file import was generate"}):M.toast({html:"Ocurrió un error inesperado"}),this.loader=!1},error:e=>{this.loader=!1,M.toast({html:"Ocurrió un error inesperado"}),console.error(e)}})},toggleData:function(e,t){e=e.map(e=>({...e,checked:!e.checked})),console.log(e),this.exportData[t]=e},base_url:function(e){return BASEURL+e},initPlugins:function(){setTimeout(()=>{var e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{});e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e,{});e=document.querySelectorAll(".collapsible"),M.Collapsible.init(e,{})},3e3)}},mounted:function(){this.$nextTick((function(){this.loader=!1,this.initPlugins()}))}});