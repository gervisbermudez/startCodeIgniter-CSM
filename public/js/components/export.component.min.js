var Export=new Vue({el:"#root",data:{exportData:{pages:[],config:[]},tableView:!0,loader:!0,filter:""},mixins:[mixins],computed:{btnEnable:function(){return!0},selectedData:function(){return{pages:this.exportData.pages.filter(e=>e.checked).map(e=>e.page_id),config:this.exportData.config.filter(e=>e.checked).map(e=>e.site_config_id)}}},methods:{getcontentText:function(e){return""},toggleView:function(){this.tableView=!this.tableView,this.initPlugins()},resetFilter:function(){this.filter=""},getData:function(){$.ajax({type:"GET",url:BASEURL+"api/v1/config/export_data",data:{},dataType:"json",success:e=>{this.exportData=e.data,this.exportData.pages=e.data.pages.map(e=>({...e,checked:!1,user:new User(e.user)})),this.exportData.config=e.data.config.map(e=>({...e,checked:!1,user:new User(e.user),config_data:JSON.parse(e.config_data)})),setTimeout(()=>{this.loader=!1,this.initPlugins()},1e3)},error:e=>{this.loader=!1,M.toast({html:"Ocurri贸 un error inesperado"}),console.error(e)}})},generateFile:function(){this.loader=!0,$.ajax({type:"POST",url:BASEURL+"api/v1/config/generate_export_file",data:{exportData:this.selectedData},dataType:"json",success:e=>{200==e.code?(M.toast({html:"file export was generate"}),this.download_export_file(e.data.exportFilename)):M.toast({html:"Ocurri贸 un error inesperado"})},error:e=>{this.loader=!1,M.toast({html:"Ocurri贸 un error inesperado"}),console.error(e)}})},toggleData:function(e,t){e=e.map(e=>({...e,checked:!e.checked})),console.log(e),this.exportData[t]=e},download_export_file:function(e){this.loader=!0,fetch(BASEURL+"temp/"+e).then(e=>e.blob()).then(t=>{const o=window.URL.createObjectURL(t),a=document.createElement("a");a.style.display="none",a.href=o,a.download=e,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(o),M.toast({html:"Your file is starting to loading"}),this.loader=!1}).catch(e=>{M.toast({html:"Ocurri贸 un error inesperado"}),console.error(e),this.loader=!1})},base_url:function(e){return BASEURL+e},initPlugins:function(){setTimeout(()=>{var e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{});e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e,{});e=document.querySelectorAll(".collapsible"),M.Collapsible.init(e,{})},3e3)}},mounted:function(){this.$nextTick((function(){this.getData()}))}});