var AlbumsLists=new Vue({el:"#root",data:{debug:DEBUGMODE,albums:[],tableView:!1,loader:!0,filter:""},mixins:[mixins],computed:{filterData:function(){if(this.filter){let e=this.filter.toLowerCase();return this.albums.filter((t,i)=>this.searchInObject(t,e))}return this.albums}},methods:{toggleView:function(){this.tableView=!this.tableView,this.initPlugins()},resetFilter:function(){this.filter=""},getPageImagePath(e,t){let i=e.items[t]?e.items[t]:{file:{}};return i.file.file_front_path?BASEURL+i.file.file_front_path:BASEURL+"public/img/default.jpg"},getAlbums:function(){var e=this;$.ajax({type:"GET",url:BASEURL+"api/v1/albumes/",data:{},dataType:"json",success:function(t){e.albums=t.data,e.albums.map(e=>(e.user=new User(e.user),e)),setTimeout(()=>{e.loader=!1,e.initPlugins()},1e3)},error:function(t){M.toast({html:response.responseJSON.error_message}),e.loader=!1}})},delete:function(e,t){var i=this;i.loader=!0,$.ajax({type:"DELETE",url:BASEURL+"api/v1/albumes/"+e.album_id,data:{},dataType:"json",success:function(e){200==e.code&&i.albums.splice(t,1),setTimeout(()=>{i.loader=!1,i.initPlugins()},1e3)},error:function(e){M.toast({html:response.responseJSON.error_message}),i.loader=!1}})},tempDelete:function(e,t){this.toDeleteItem.item=e,this.toDeleteItem.index=t},confirmCallback(e){e&&this.delete(this.toDeleteItem.item,this.toDeleteItem.index)},initPlugins:function(){setTimeout(()=>{var e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{});e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e,{})},3e3)}},mounted:function(){this.$nextTick((function(){this.getAlbums(),this.initPlugins()}))}});