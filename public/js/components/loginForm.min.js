var loginForm=new Vue({el:"#root",data:{debug:DEBUGMODE,loader:!0,username:"",password:"",redirect:"",remember_user:!1,userdata:null},computed:{btnEnable:function(){return!(!this.username||!this.password)}},methods:{login(){var e=this;this.loader=!0,$.ajax({type:"POST",url:BASEURL+"/api/v1/login/",data:{username:this.username,password:this.password},dataType:"json",success:function(r){e.remember_user&&(localStorage.removeItem("userdata"),localStorage.setItem("userdata",JSON.stringify(r.userdata[0]))),window.location=e.redirect?BASEURL+e.redirect:BASEURL+r.redirect},error:function(r){M.toast({html:r.responseJSON.error_message}),e.loader=!1}})},resetUserdata(){this.userdata=null,this.username="",this.password="",localStorage.removeItem("userdata")},getUrlParameter(e){var r,t,a=window.location.search.substring(1).split("&");for(t=0;t<a.length;t++)if((r=a[t].split("="))[0]===e)return void 0===r[1]||decodeURIComponent(r[1])},getRememberUserdata(){let e=JSON.parse(localStorage.getItem("userdata"));e&&(console.log(e),this.userdata=e,this.username=e.username,this.remember_user=!!e)}},mounted:function(){this.$nextTick((function(){console.log("mounted loginForm"),this.loader=!1,this.getRememberUserdata();let e=this.getUrlParameter("redirect");this.redirect="admin"==e?"":e}))}});