var dataTable=Vue.component("dataTable",{template:"#dataTableComponent-template",props:{endpoint:{type:String,required:!1},index_data:{type:String,required:!1},hideids:{type:Boolean,default:!1},colums:{type:Array,required:!1,default:null},module:{type:String,required:!1}},data:function(){return{data:[],labels:[{colum:"name",label:"Name"}],statusIcons:[{tooltip:"No permitido",icon:"not_interested"},{tooltip:"Permitido",icon:"publish"}],tableView:!1,loader:!0,filter:"",orderDataConf:{strPropertyName:null,sort_as:"asc"}}},mixins:[mixins],computed:{filterData:function(){if(this.filter){let e=this.filter.toLowerCase();return this.data.filter((t,i)=>this.searchInObject(t,e))}return this.data}},methods:{toggleView:function(){this.tableView=!this.tableView,this.initPlugins()},toggleEddit(e){e.editable=!e.editable,this.$forceUpdate()},resetFilter:function(){this.filter=""},initPlugins:function(){setTimeout(()=>{var e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{});e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e,{});e=document.querySelectorAll(".collapsible");M.Collapsible.init(e,{});e=document.querySelectorAll("select");M.FormSelect.init(e,{})},3e3)},getData:function(){var e=this,t=BASEURL+this.endpoint;fetch(t).then(e=>e.json()).then(t=>{let i=t.data;i.map(e=>(e.user?e.user=new User(e.user):e.user=new User({}),e)),i.length&&!this.colums&&(this.labels=Object.keys(i[0]),this.hideids&&(this.labels=this.labels.filter(e=>-1==e.indexOf("_id"))),this.colums=this.labels.map(e=>({colum:e,label:e}))),e.data=i,e.loader=!1,this.initPlugins()}).catch(t=>{e.loader=!1})},getContent(e,t){let i="";switch(t){case"user":i=`<a href="${BASEURL+e[t].get_profileurl()}">${e[t].get_fullname()}</a>`;break;case"status":i=`<span>\n                <i class="material-icons tooltipped" data-position="left" data-delay="50" data-tooltip="${this.statusIcons[e[t]].tooltip}">${this.statusIcons[e[t]].icon}</i>\n              </span>`;break;default:i=e[t]}return i},editItem(e,t){this.$listeners&&this.$listeners.edit?this.$emit("edit",{item:e,index:t}):this.$router.push({name:"edit",params:{data:{index:t,item:e}}})},createItem(){this.$router.push({name:"edit",params:{data:{mode:"new"}}})},deleteItem(e,t){this.$listeners&&this.$listeners.delete?this.$emit("delete",{item:e,index:t}):this.tempDelete(e,t)},archiveItem(e,t){return this.$listeners&&this.$listeners.archive?void this.$emit("archive",{item:e,index:t}):void 0},delete(e,t){console.log({item:e,index:t})},tempDelete:function(e,t){this.toDeleteItem.item=e,this.toDeleteItem.index=t},confirmCallback(e){e&&this.delete(this.toDeleteItem.item,this.toDeleteItem.index)},initPlugins:function(){setTimeout(()=>{var e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{}),e=document.querySelectorAll(".dropdown-trigger"),M.Dropdown.init(e,{})},3e3)}},mounted:function(){this.$nextTick((function(){this.endpoint?this.getData():this.loader=!1,this.$root.$on("eventing",e=>{this.data[e.index]=e.item})}))}});