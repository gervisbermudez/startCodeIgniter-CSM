var loginForm=new Vue({el:"#root",data:{loader:!0,editMode:!1,user_id:"",username:"",password:"",email:"",usergroup_id:"",usergroups:[],user_data:{nombre:"",apellido:"",direccion:"",telefono:""},status:!0,validFields:{username:!1,email:!1,nombre:!1,apellido:!1,direccion:!1,telefono:!1},patterns:{letters:/^[A-Za-z]+$/,email:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,numbers:/^\d+$/,alphanumeric:/^[ a-z0-9A-ZÀ-ÿ\u00f1\u00d1]*$/g}},computed:{btnEnable:function(){let e=!0;for(const t in this.validFields)if(this.validFields.hasOwnProperty(t)){this.validFields[t]||(e=!1)}return e}},methods:{save(){var e=this;this.loader=!0,$.ajax({type:"POST",url:BASEURL+"admin/login/ajax_verify_auth",data:{username:this.username,password:this.password},dataType:"json",success:function(e){console.log(e),window.location=BASEURL+e.redirect},error:function(t){M.toast({html:t.responseJSON.error_message}),e.loader=!1}})},validateField(e){switch(e){case"username":if(!this.username.match(this.patterns.letters))return this.validFields[e]=!1,void M.toast({html:"Only letters are allowed"});this.serverValidation(e);break;case"email":if(!this.email.match(this.patterns.email))return this.validFields[e]=!1,void M.toast({html:"Email invalid"});this.serverValidation(e);break;case"nombre":if(!this.user_data.nombre.match(this.patterns.letters))return this.validFields.nombre=!1,void M.toast({html:"Only letters are allowed"});break;case"apellido":if(!this.user_data.apellido.match(this.patterns.letters))return this.validFields.apellido=!1,void M.toast({html:"Only letters are allowed"});break;case"telefono":if(!this.user_data.telefono.match(this.patterns.numbers))return this.validFields.telefono=!1,void M.toast({html:"Only numbers are allowed"});break;case"direccion":if(!this.user_data.direccion.match(this.patterns.alphanumeric))return this.validFields.direccion=!1,void M.toast({html:"Simbols are not allowed"})}this.validFields[e]=!0},serverValidation(e){var t=this;$.ajax({type:"POST",url:BASEURL+"admin/usuarios/ajax_check_field",data:{field:e,value:t[e]},dataType:"json",success:function(a){a.code&&(t.validFields[e]=a.data,a.data||M.toast({html:"The "+e+" is already registered!"}),t.$forceUpdate())}})}},mounted:function(){this.$nextTick((function(){console.log("mounted UserNewForm"),this.loader=!1;var e=this;$.ajax({type:"GET",url:BASEURL+"admin/usuarios/ajax_get_usergroups",data:{},dataType:"json",success:function(t){200==t.code&&(e.usergroups=t.data,setTimeout(()=>{var e=document.querySelectorAll("select");M.FormSelect.init(e,{})},2e3))},error:function(t){M.toast({html:response.responseJSON.error_message}),e.loader=!1}})}))}});