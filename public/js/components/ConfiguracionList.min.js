var ConfiguracionList=new Vue({el:"#root",data:{configurations:[],tableView:!0,loader:!0,filter:""},computed:{filterConfigurations:function(){if(this.filter){let e=this.filter.toLowerCase();return this.configurations.filter((t,i)=>-1!=t.config_name.toLowerCase().indexOf(e)||-1!=t.config_value.toLowerCase().indexOf(e)||-1!=t.config_value.toLowerCase().indexOf(e)||-1!=t.config_value.toLowerCase().indexOf(e)||-1!=t.config_type.toLowerCase().indexOf(e))}return this.configurations}},methods:{toggleEddit(e){this.configurations[e].editable=!this.configurations[e].editable,this.$forceUpdate()},getcontentText:function(e){return e.description.substring(0,50)+"..."},toggleView:function(){this.tableView=!this.tableView,this.initPlugins()},resetFilter:function(){this.filter=""},saveConfig(e,t){this.toggleEddit(e);var i=this,o=BASEURL+"api/v1/config";$.ajax({type:"POST",url:o,data:i.configurations[e],dataType:"json",success:function(e){i.debug&&console.log(o,e),setTimeout(()=>{i.loader=!1},1500),200==e.code?"function"==typeof t&&t(e):(M.toast({html:"Config Saved!"}),i.loader=!1)},error:function(e){M.toast({html:e.responseJSON.error_message}),i.loader=!1}})},getPageImagePath:e=>e.imagen_file?BASEURL+e.imagen_file.file_path.substr(2)+e.imagen_file.file_name+"."+e.imagen_file.file_type:"https://materializecss.com/images/sample-1.jpg",getconfigurations:function(){var e=this;$.ajax({type:"GET",url:BASEURL+"api/v1/config/",data:{},dataType:"json",success:function(t){let i=t.data;for(const e in i)i.hasOwnProperty(e)&&(i[e].user=new User(i[e].user));e.configurations=i,setTimeout(()=>{e.loader=!1,e.initPlugins()},1e3)},error:function(t){M.toast({html:response.responseJSON.error_message}),e.loader=!1}})},deletePage:function(e,t){var i=this;i.loader=!0,$.ajax({type:"DELETE",url:BASEURL+"api/v1/categorie/"+e.categorie_id,data:{},dataType:"json",success:function(e){200==e.code&&i.configurations.splice(t,1),setTimeout(()=>{i.loader=!1,i.initPlugins()},1e3)},error:function(e){M.toast({html:response.responseJSON.error_message}),i.loader=!1}})},base_url:function(e){return BASEURL+e},initPlugins:function(){setTimeout(()=>{var e=document.querySelectorAll(".tooltipped");M.Tooltip.init(e,{}),e=document.querySelectorAll(".dropdown-trigger"),M.Dropdown.init(e,{})},3e3)}},mounted:function(){this.$nextTick((function(){this.getconfigurations(),this.initPlugins()}))}});