Vue.component("configuration",{template:"#configurationComponent-template",props:["configuration"],data:function(){return{show_body:!0,show_arrow:!1,show_label:!0,handle_value_as:"input"}},mixins:[mixins],computed:{isChecked(){return this.configuration.config_value==this.configuration.config_data.true}},methods:{toggleEddit(){this.configuration.editable=!this.configuration.editable,this.$forceUpdate()},switchCahnged(t){t.target.checked?this.configuration.config_value=this.configuration.config_data.true:(this.configuration.config_value=this.configuration.config_data.true,this.configuration.config_data.perm_values.forEach(t=>{t!=this.configuration.config_data.true&&(this.configuration.config_value=t)})),this.runSave()},saveConfig(){this.toggleEddit();let t=this.configuration;if("boolean"!=t.config_data.type_value){let i=new VueForm({field:{value:t.config_value,required:!0,type:t.config_data.validate_as,maxLength:t.config_data.max_lenght,minLength:t.config_data.min_lenght}});i.validate(),i.errors.length>0?(t.validate=!1,M.toast({html:"Verificar la configuracion del campo"})):(t.validate=!0,this.runSave())}else t.config_value?t.config_value=t.config_data.true:t.config_data.perm_values.forEach(i=>{i!=t.config_data.true&&(t.config_value=i)}),this.runSave()},runSave(){var t=this,i=BASEURL+"api/v1/config";$.ajax({type:"POST",url:i,data:this.configuration,dataType:"json",success:function(a){t.debug&&console.log(i,a),200==a.code?("function"==typeof callBack&&callBack(a),M.toast({html:"Config Saved!"})):M.toast({html:a.responseJSON.error_message})},error:function(t){M.toast({html:t.responseJSON.error_message})}})},initPlugins:function(){setTimeout(()=>{var t=document.querySelectorAll(".tooltipped");M.Tooltip.init(t,{});t=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(t,{});t=document.querySelectorAll(".collapsible");M.Collapsible.init(t,{});t=document.querySelectorAll("select");M.FormSelect.init(t,{})},3e3)}},mounted:function(){this.$nextTick((function(){this.initPlugins(),this.configuration.validate=!0,this.handle_value_as=this.configuration.config_data.handle_as,"boolean"==this.configuration.config_data.type_value?(this.show_body=!1,this.show_arrow=!1,this.show_label=!1,this.handle_value_as="switch"):"string"==this.configuration.config_data.type_value&&null==this.configuration.config_data.perm_values?(this.show_body=!0,this.show_label=!0,this.show_arrow=!1,this.handle_value_as=this.configuration.config_data.handle_as):"string"==this.configuration.config_data.type_value&&"object"==typeof this.configuration.config_data.perm_values&&(this.show_body=!0,this.show_arrow=!0,this.show_label=!1,this.handle_value_as=this.configuration.config_data.handle_as)}))}});