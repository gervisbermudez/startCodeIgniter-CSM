var FormContentList=new Vue({el:"#root",data:{debug:DEBUGMODE,contents:[],tableView:!0,loader:!0,filter:""},mixins:[mixins],computed:{filterContents:function(){if(this.filter){let t=this.filter.toLowerCase();return this.contents.filter((e,n)=>this.searchInObject(e,t))}return this.contents}},methods:{getcontentText:function(t){let e=t.data;return Object.values(e).join(" ").substring(0,90)+"..."},toggleView:function(){this.tableView=!this.tableView,this.initPlugins()},resetFilter:function(){this.filter=""},getContentImagePath:t=>t.imagen_file?BASEURL+t.imagen_file.file_path.substr(2)+t.imagen_file.file_name+"."+t.imagen_file.file_type:BASEURL+"public/img/default.jpg",getContents:function(){var t=this;$.ajax({type:"GET",url:BASEURL+"api/v1/models/data",data:{},dataType:"json",success:function(e){t.contents=e.data,setTimeout(()=>{t.loader=!1,t.initPlugins()},1e3)},error:function(e){t.loader=!1,M.toast({html:"Ocurrió un error inesperado"}),console.error(e)}})},deleteContent:function(t,e){var n=this;n.loader=!0,$.ajax({type:"DELETE",url:BASEURL+"api/v1/models/data/"+t.custom_model_content_id,data:{},dataType:"json",success:function(t){200==t.code&&n.contents.splice(e,1),setTimeout(()=>{n.loader=!1,n.initPlugins()},1e3)},error:function(t){n.loader=!1,M.toast({html:"Ocurrió un error inesperado"}),console.error(t)}})},tempDelete:function(t,e){this.toDeleteItem.content=t,this.toDeleteItem.index=e},confirmCallback(t){t&&this.deleteContent(this.toDeleteItem.content,this.toDeleteItem.index)},base_url:function(t){return BASEURL+t},initPlugins:function(){setTimeout(()=>{var t=document.querySelectorAll(".tooltipped");M.Tooltip.init(t,{}),t=document.querySelectorAll(".dropdown-trigger"),M.Dropdown.init(t,{})},3e3)}},mounted:function(){this.$nextTick((function(){this.getContents(),this.initPlugins()}))}});