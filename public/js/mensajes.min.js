jQuery(document).ready((function(e){fnSetMessageEvent(),e(".folder").click((function(o){fnToggleFormComposeMenssage("hide");var t=e(this).attr("data-folder");e(".current-folder").html(e(this).attr("data-tooltip")),fnGetFolder(t)})),e("#mail-create").click((function(e){fnToggleFormComposeMenssage("show")})),e(".compose-msg-head").click((function(o){e(this).parents(".compose-msg-cont").toggleClass("close")})),e(".close-compose-msg").click((function(o){e(this).parents(".compose-msg-cont").hide("slow")})),e(".chips").material_chip({data:[],placeholder:"To:",secondaryPlaceholder:"",inputname:"_to"})}));var fnMoveMessageTo=function(e,o){if($(".collection").attr("data-active-folder")!=e){var t=$("#mensaje-id").attr("data-id");t&&$.ajax({url:base_url+"admin/mensajes/update_messagefolder_byajax/",type:"POST",dataType:"json",data:{id:t,folder:e}}).done((function(e){e.result?($(".collection-item[data-id="+t+"]").hide("slow"),$(".preview").html(""),"function"==typeof o&&o()):Materialize.toast("Ocurrio un error",4e3)})).fail((function(){console.log("fnMoveMessageTo error")})).always((function(){console.log("fnMoveMessageTo complete")}))}},fnGetFolder=function(e,o){$.ajax({url:base_url+"admin/mensajes/getfolder/"+e,type:"POST",dataType:"html"}).done((function(t){$(".collection").html(t),$(".collection").attr("data-active-folder",e),$(".preview").html(""),fnSetMessageEvent(),"function"==typeof o&&o()})).fail((function(){console.log("fnGetFolder error")})).always((function(){console.log("fnGetFolder complete")}))},fnSetMessageEvent=function(){$(".message").click((function(e){var o=$(this).attr("data-id"),t=this;$.ajax({url:base_url+"admin/mensajes/get_mensaje_by_ajax/",type:"POST",dataType:"html",data:{id_mensaje:o}}).done((function(e){$(".preview").html(e),$(t).find(".new.badge").hide("slow"),fnSetMessageOptionsEvent()})).fail((function(){console.log("fnSetMessageEvent error")})).always((function(){console.log("fnSetMessageEvent complete")})),e.preventDefault()}))},fnSetMessageOptionsEvent=function(){$(".opt-reply").click((function(e){$(".chip").remove();var o=$("#_subject").html(),t=$("#from").html();fnToggleFormComposeMenssage("show"),$(fnChipEmailTemplate(t)).insertBefore("#_to"),$("#subject").val("FW: "+o)})),$(".opt-delete").click((function(e){fnMoveMessageTo("4",(function(){Materialize.toast("Eliminado!",8e3)}))})),$(".opt-archive").click((function(e){fnMoveMessageTo("2",(function(){Materialize.toast("Archivado!",8e3)}))})),$(".opt-important").click((function(e){fnMoveMessageTo("6",(function(){Materialize.toast("Marcado como importante!",8e3)}))}))},fnChipEmailTemplate=function(e){return strChipTemplate='<div class="chip"><span class="txt">'+e+'</span><i class="close material-icons">close</i></div>'},fnToggleFormComposeMenssage=function(e){"show"==e?($(".chip").remove(),$(".compose-msg-head").removeClass("close"),$(".compose-msg-cont").show("slow")):$(".compose-msg-cont").hide()};