function actualizaCacheDinamico(c,e,a){return a.ok?caches.open(c).then(c=>(c.put(e,a.clone()),a.clone())):a}function actualizaCacheStatico(c,e,a){if(!a.includes(e.url))return fetch(e).then(a=>actualizaCacheDinamico(c,e,a))}function manejoApiMensajes(c,e){return"POST"===e.clone().method?self.registration.sync?e.clone().text().then(c=>{const e=JSON.parse(c);return guardarMensaje(e)}):fetch(e):fetch(e).then(a=>a.ok?(actualizaCacheDinamico(c,e,a.clone()),a.clone()):caches.match(e)).catch(c=>caches.match(e))}