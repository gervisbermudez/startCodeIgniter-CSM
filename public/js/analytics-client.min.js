!function(){"use strict";const t={apiEndpoint:"/api/v1/analytics",autoTrack:!0,trackClicks:!0,trackScroll:!0,trackFormSubmits:!0,trackPageTime:!0,sendInterval:5e3};let n=Date.now(),e=[],o=null,a=0,i=!0;function r(){if(0===e.length)return;const n=[...e];e=[],n.forEach(n=>{fetch(t.apiEndpoint+"/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).catch(t=>console.error("Error sending event:",t))})}function c(){t.autoTrack&&(!function(){const t=screen.width+"x"+screen.height;trackEvent("Device","Screen Resolution",t)}(),t.trackClicks&&document.addEventListener("click",function(t){const n=t.target.closest("a, button, [data-track]");if(!n)return;const e=n.getAttribute("data-track-label")||n.textContent.trim()||n.getAttribute("href")||n.getAttribute("id")||n.className;trackEvent("Click",n.tagName,e)}),function(){if(!t.trackScroll)return;let n;window.addEventListener("scroll",function(){clearTimeout(n),n=setTimeout(function(){const t=Math.round(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100);t>a&&(a=t,25!==t&&50!==t&&75!==t&&100!==t||trackEvent("Scroll","Depth",t+"%",t))},150)})}(),t.trackFormSubmits&&document.addEventListener("submit",function(t){const n=t.target,e=n.getAttribute("name")||n.getAttribute("id")||"unnamed-form";trackEvent("Form","Submit",e)}),t.trackPageTime&&setInterval(function(){if(i){const t=Math.round((Date.now()-n)/1e3);t%30==0&&trackEvent("Engagement","Time on Page",window.location.pathname,t)}},3e4),document.addEventListener("visibilitychange",function(){document.hidden?(i=!1,trackEvent("Engagement","Page Hidden",window.location.pathname)):(i=!0,trackEvent("Engagement","Page Visible",window.location.pathname))}),document.addEventListener("click",function(t){const n=t.target.closest("a");if(!n)return;const e=n.getAttribute("href");e&&e.startsWith("http")&&!e.includes(window.location.hostname)&&trackEvent("Outbound","Click",e)}),function(){const t=[".pdf",".zip",".doc",".docx",".xls",".xlsx",".ppt",".pptx"];document.addEventListener("click",function(n){const e=n.target.closest("a");if(!e)return;const o=e.getAttribute("href");if(!o)return;const a=o.substring(o.lastIndexOf(".")).toLowerCase();t.includes(a)&&trackEvent("Download",a,o)})}(),window.addEventListener("error",function(t){trackEvent("Error","JavaScript Error",t.message,null,{filename:t.filename,lineno:t.lineno,colno:t.colno})}),window.addEventListener("unhandledrejection",function(t){trackEvent("Error","Unhandled Promise Rejection",t.reason?t.reason.toString():"Unknown",null,{reason:t.reason})}),window.addEventListener("beforeunload",function(){const e=Math.round((Date.now()-n)/1e3),o=JSON.stringify({category:"Engagement",action:"Page Exit",label:window.location.pathname,value:e,metadata:{scroll_depth:a}});navigator.sendBeacon&&navigator.sendBeacon(t.apiEndpoint+"/event",o)}),trackEvent("Pageview",window.location.pathname,document.title))}window.trackEvent=function(n,a,i,c,d){const s={category:n,action:a,label:i||null,value:c||null,metadata:d||null,timestamp:(new Date).toISOString()};e.push(s),"Conversion"===n||"Error"===n?r():function(){o&&clearTimeout(o);o=setTimeout(r,t.sendInterval)}()},window.trackConversion=function(){fetch(t.apiEndpoint+"/conversion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).catch(t=>console.error("Error tracking conversion:",t))},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c(),window.AnalyticsConfig=t}();