var arrayMensajes=Array();jQuery(document).ready((function(a){M.AutoInit(),a("a.sidenav-trigger-lg").click((function(t){a("body").toggleClass("sidenav-open"),a("#slide-out").removeAttr("style")})),a("[data-select-img]").click((function(t){var e=a(this).find(".img").attr("data-name"),i=a("#modal1").attr("data-field");a("#"+i).val(e),a("#modal1").closeModal()})),a("#slide-out").niceScroll(),fn_navigate_files(),fn_delete_data(),fn_change_state()}));var fn_navigate_files=function(a){$('[data-navigatefiles="active"]').length&&(fngetDir($(".gallery").attr("data-active-dir")),$("[data-expected]").click((function(a){$("[data-expected]").attr("data-expected","inactive"),$(this).attr("data-expected","active")})))};function fngetDir(a){$(".gallery").attr("data-active-dir",a),$.ajax({url:base_url+"admin/archivos/ajaxfnGetdir",type:"POST",dataType:"json",data:{directorio:a}}).done((function(t){for(var e='<div class="col m3 s4 dir"><div class="card"><div class="card-content">UP</div><div class="card-action"><span class="grey-text text-darken-4 dirname">'+t._parentdir+"</span></div></div></div>",i=t.files.length-1;i>=0;i--){if(t.files[i].match(/\.[0-9a-z]{1,5}$/i)||"."==t.files[i]||".."==t.files[i]){if("."!=t.files[i]&&".."!=t.files[i]){var c=t.files[i];c.search(".jpg")>-1||c.search(".png")>-1||c.search(".gif")>-1?e+='<div class="col m3 s4 getback"><div class="card"><div class="card-image"><img class="activator" src="'+base_url+a+"/"+t.files[i]+'"></div><div class="card-action strFilename" data-back-data="'+a.substring(2)+"/"+t.files[i]+'">'+t.files[i]+"</div></div></div>":e+='<div class="col m3 s4 file"><div class="card"><div class="card-content"><i class="material-icons">description</i><br /></div><div class="card-action"><span class="grey-text text-darken-4 dirname">'+t.files[i]+"</span></div></div></div>"}}else e+='<div class="col m3 s4 dir"><div class="card"><div class="card-content"><i class="material-icons">folder</i><br /></div><div class="card-action"><span class="grey-text text-darken-4 dirname">'+a+"/"+t.files[i]+"</span></div></div></div>"}$(".gallery").html(e),$(".gallery .dir").click((function(a){fngetDir($(this).find(".dirname").html())})),fnSetBackFile(),console.log("success")})).fail((function(){console.log("error")})).always((function(){console.log("complete")}))}var fnSetBackFile=function(){$(".getback").click((function(a){var t=$(this).find(".strFilename").attr("data-back-data");$('[data-expected="active"]').val(t),$("[data-expected]").attr("data-expected","inactive"),$("#modal1").closeModal()}))},fn_delete_data=function(){$("[data-ajax-action]").click((function(a){$("[data-ajax-action]").attr("data-ajax-action","inactive"),$(this).attr("data-ajax-action","active")})),$('[data-action="acept"]').click((function(a){var t=$("[data-ajax-action=active]");$.ajax({url:base_url+t.attr("data-url"),type:"POST",dataType:"json",data:$.parseJSON(t.attr("data-action-param"))}).done((function(a){t.attr("data-url-redirect")?window.location=base_url+t.attr("data-url-redirect"):(a.result&&$(t.attr("data-target-selector")).remove(),Materialize.toast(a.message,4e3))})).fail((function(){console.log("error")}))}))},fn_change_state=function(){$(".change_state").change((function(a){var t=$(this),e=$.parseJSON(t.attr("data-action-param"));e.status="0",$(".change_state").is(":checked")&&(e.status="1"),console.log(e),$.ajax({url:base_url+t.attr("data-url"),type:"POST",dataType:"json",data:e}).done((function(a){t.attr("data-url-redirect")?window.location=base_url+t.attr("data-url-redirect"):Materialize.toast(a.message,4e3)})).fail((function(){console.log("error")}))}))};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/public/js/service-worker.js")});